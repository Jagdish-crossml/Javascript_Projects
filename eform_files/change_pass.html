<!DOCTYPE html>
<html lang="en">

<head>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href='https://fonts.googleapis.com/css?family=Manrope' rel='stylesheet'>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/change_pass.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" />

    <title>
        popup window
    </title>
</head>

<body>
    <div id="topdiv"><i class="fa fa-angle-down" id="arrow"></i></div>
    <div id="rectangle1">
        <img id="eimg" alt="e-form" src="assets/logo.svg">
        <img id="uimg" alt="user" src="assets/Oval.png">
        <img id="dimg" alt="down" src="assets/sdown.png">
        <label id="toplabel">Change password</label>
        <div id="rectangle2">
            <label id="oldplabel">Old Password</label>
            <input type="password" id="opassword" class="opassword" placeholder="Enter Old Password">
            <label id="newplabel">New Password</label>
            <input type="password" id="npassword" class="npassword" placeholder="Enter New Password">
            <i class="bi bi-eye-slash" id="togglePassword"></i>

            <a style="float:right;" href="#" id="gen">Generate Password </a>
            <div id="ismyModal" class="ismodal">

                <!-- Modal content -->
                <div class="ismodal-content">
                    <span class="close">&times;</span>
                    <img id="key" alt="key" src="assets/key.png">
                    <p id="genlabel">Use password generated by Eform</p>
                    <p id="regex">pA;LQ[\)0>KX+f}jD </p>
                    <img id="genimg" alt="genimg" src="assets/genpass.png">
                    <!-- <img id="enimg" alt="enimg" src="assets/e.png"> -->
                </div>

            </div>
            <label id="replabel">Repeat Password</label>
            <input type="password" id="rpassword" class="rpassword" placeholder="Repeat New Password">
            <i class="bi bi-eye-slash" id="reptogglePassword"></i>
            <button type="button" id="cancelbtn" class="btn btn-primary" data-toggle="button" aria-pressed="false" autocomplete="off">Cancel</button>
            <button type="button" id="savebtn" class="btn btn-primary">Save</button>
        </div>

    </div>
    <script>
        const modalfunc = function() {
            var modal = document.getElementById("ismyModal");
            var btn = document.getElementById("gen");

            var span = document.getElementsByClassName("close")[0];
            if (modal.style.display = "none") {
                btn.onclick = function() {
                    modal.style.display = "block";
                }
            }


            span.onclick = function() {
                modal.style.display = "none";
            }

            $(document).click(function(e) {
                if ($(e.target).is('#ismyModal')) {
                    $('#ismyModal').fadeOut(500);
                }

            });


        }
        modalfunc();

        //toggle eye icon
        const togglePassword = document.querySelector('#togglePassword');
        const password = document.querySelector('#npassword');
        togglePassword.addEventListener('click', function(e) {
            const type = password.getAttribute('type') === 'npassword' ? 'text' : 'npassword';
            password.setAttribute('type', type);
            this.classList.toggle('bi-eye');
        });
        const reptogglePassword = document.querySelector('#reptogglePassword');
        const reppassword = document.querySelector('#rpassword');
        reptogglePassword.addEventListener('click', function(e) {
            // toggle the type attribute
            const type = reppassword.getAttribute('type') === 'rpassword' ? 'text' : 'rpassword';
            reppassword.setAttribute('type', type);
            // toggle the eye / eye slash icon
            this.classList.toggle('bi-eye');
        });


        document.getElementById('arrow').addEventListener('click', function() {
            const element = document.getElementById('rectangle1')
            const hide = function(element) {
                element.style.display = 'none';
                document.getElementById('topdiv').style.top = '550px';
            }
            const show = function(element) {
                element.style.display = 'block';
                document.getElementById('topdiv').style.top = '142px';
            }
            const toggle = function(element) {
                if (window.getComputedStyle(element).display !== 'none') {
                    hide(element);
                    return;
                }

                // show the element
                show(element);

            }
            toggle(element)

        });
    </script>
</body>